<!DOCTYPE html>
<html lang="en" class="h-full">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Price in WorkHour</title>
    <!-- <link href="/dist/output.css" rel="stylesheet" /> -->
    <link href="/styles/indexStyle.css" rel="stylesheet" />
    <link href="/styles/input.css" rel="stylesheet" />
  </head>

  <body>
    <!-- Title -->
    <header>
      <h2>
        PRICE IN TIME CONVERSOR
      </h2>
    </header>

    <!-- Form/Results -->
    <article>
      <div class="formContainer">
        <form>
          <div class="inputsContainer">
            <div class="inputBox">
              <input id="txtSalary" name="salary" for="txtSalary" type="text" required="not-required" />
              <span>SALARY</span>
            </div>
            <div class="inputBox">
              <input id="txtWorkingDays" name="workingDays" for="txtWorkingDays" type="text" required="not-required" />
              <span>WORKING DAYS / WEEK</span>
            </div>
            <div class="inputBox">
              <input id="txtWorkingHours" name="workingHours" for="txtWorkingHours" type="text"
                required="not-required" />
              <span>WORKING HOURS / DAY</span>
            </div>
            <div class="inputBox">
              <input id="txtProductPrice" name="productPrice" for="txtProductPrice" type="text"
                required="not-required" />
              <span>PRODUCT PRICE</span>
            </div>
            <div class="buttonsContainer">
              <button class="reset" onclick="onClearClick()" type="reset">
                <span>
                  <ion-icon name="trash-outline"></ion-icon>
                </span>
                CLEAR
              </button>
              <button class="submit" onclick="submitClick()">
                <span>
                  <ion-icon name="checkmark-circle-outline"></ion-icon>
                </span>
                SUBMIT
              </button>
            </div>
        </form>
      </div>
      </div>

      <!-- Results -->
      <div class="expanded-panel">
        <h5 id="salaryResult"></h5>
        <h5 id="valueDaysResult"></h5>
        <h5 id="valueHoursResult"></h5>
        <h5 id="realProdPriceResult"></h5>
        <h5 id="workTimeNeededResult"></h5>
        <h5 id="workTotalHourResult"></h5>
      </div>
    </article>

    <footer>
      <div class="">
        <h4 class="">
          By
          <a class="" href="https://github.com/imLeonam">
            @imLeonam
            <ion-icon class="" name="logo-github"></ion-icon></a>
        </h4>
      </div>
    </footer>
  </body>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <script src="/src/scripts/ProductPriceInTime.js"></script>
  <script>
    let resultsContainer = document.querySelector('.expanded-panel');
    const salaryResult = document.querySelector('#salaryResult');
    const valueDaysResult = document.querySelector('#valueDaysResult');
    const valueHoursResult = document.querySelector('#valueHoursResult');
    const realProdPriceResult = document.querySelector('#realProdPriceResult');
    const workTimeNeededResult = document.querySelector('#workTimeNeededResult');
    const workTotalHourResult = document.querySelector('#workTotalHourResult');

    function submitClick() {
      const form = document.querySelector('form');
      form.addEventListener('submit', (event) => {
        event.preventDefault();

        const productPrice = document.querySelector('#txtProductPrice').value;
        const salary = document.querySelector('#txtSalary').value;
        const workingHours = document.querySelector('#txtWorkingHours').value;
        const workingDays = document.querySelector('#txtWorkingDays').value;

        if (workingHours > 21) {
          window.alert('You\'re working too much, find help!');
          return;
        }
        if (workingDays > 7) {
          window.alert('The weeks have only 7 days!');
          return;
        }

        const productHourPrice = new ProductPriceInTime(
          productPrice,
          salary,
          workingHours,
          workingDays
        );

        const valueHours = productHourPrice.getEarnPerHour();
        const valueDays = productHourPrice.getEarnPerDay();
        const salaryValue = productHourPrice.getSalary();
        const realProdPrice = productHourPrice.getProductPrice();
        const totalProdHoursPrice = productHourPrice.productValueInHours();
        const formattedProdHourPrice = productHourPrice.convertDecimalTime(totalProdHoursPrice);

        salaryResult.innerText = 'Você ganha ' + productHourPrice.formatCurrency(salaryValue);
        valueDaysResult.innerText = 'Sendo ' + productHourPrice.formatCurrency(valueDays) + ' por dia';
        valueHoursResult.innerText = 'e ' + productHourPrice.formatCurrency(valueHours) + ' por hora';

        if (productPrice) {
          realProdPriceResult.innerText = 'O Gasto é ' + realProdPrice;
          workTimeNeededResult.innerText = 'Você precisa trabalhar ' + formattedProdHourPrice + ' para pagar isso.';
          workTotalHourResult.innerText = 'Aproximadamente ' + totalProdHoursPrice.toFixed(2) + ' horas.';
        }

        resultsContainer.classList.add('active');
      })
    }

    function onClearClick() {
      resultsContainer.classList.remove('active');
      salaryResult.innerText = '';
      valueDaysResult.innerText = '';
      valueHoursResult.innerText = '';
      realProdPriceResult.innerText = '';
      workTimeNeededResult.innerText = '';
      workTotalHourResult.innerText = '';
    }

  </script>

</html>